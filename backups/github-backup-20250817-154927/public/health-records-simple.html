<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossier M√©dical - Version Simple</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .content {
            padding: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
            font-weight: bold;
        }
        
        .dental-chart-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        .chart-section {
            flex: 1;
        }
        
        .info-section {
            flex: 0 0 300px;
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .svg-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        
        .tooth-info {
            margin-bottom: 20px;
        }
        
        .tooth-info h3 {
            color: #374151;
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        
        .tooth-details {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3b82f6;
        }
        
        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #2563eb;
        }
        
        .no-selection {
            text-align: center;
            color: #6b7280;
            font-style: italic;
            padding: 40px 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>ü¶∑ Dossier M√©dical - Version Simple</h1>
                <p>Test de l'int√©gration du diagramme dentaire interactif</p>
            </div>
            
            <div class="content">
                <div class="tabs">
                    <div 
                        v-for="tab in tabs" 
                        :key="tab.id"
                        :class="['tab', { active: activeTab === tab.id }]"
                        @click="activeTab = tab.id"
                    >
                        {{ tab.name }}
                    </div>
                </div>
                
                <!-- Onglet G√©n√©ral -->
                <div v-show="activeTab === 'general'">
                    <h2>Informations G√©n√©rales</h2>
                    <div class="form-group">
                        <label>Nom du patient</label>
                        <input type="text" v-model="patientName" placeholder="Nom du patient">
                    </div>
                    <div class="form-group">
                        <label>Date de naissance</label>
                        <input type="date" v-model="patientBirthDate">
                    </div>
                    <div class="form-group">
                        <label>Notes g√©n√©rales</label>
                        <textarea v-model="generalNotes" placeholder="Notes g√©n√©rales sur le patient"></textarea>
                    </div>
                </div>
                
                <!-- Onglet Dossier Dentaire -->
                <div v-show="activeTab === 'dental'">
                    <h2>ü¶∑ Dossier Dentaire</h2>
                    
                    <div class="dental-chart-container">
                        <div class="chart-section">
                            <div class="svg-container">
                                <object 
                                    data="/images/dental-chart-interactive.svg" 
                                    type="image/svg+xml"
                                    width="100%"
                                    height="600"
                                    @load="initializeDentalChart">
                                </object>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <button @click="clearDentalSelection" class="btn">üóëÔ∏è Effacer la s√©lection</button>
                                <button @click="saveDentalData" class="btn">üíæ Sauvegarder</button>
                            </div>
                        </div>
                        
                        <div class="info-section">
                            <div v-if="selectedDentalTooth" class="tooth-info">
                                <h3>Dent s√©lectionn√©e : {{ selectedDentalTooth }}</h3>
                                <div class="tooth-details">
                                    <div class="form-group">
                                        <label>√âtat de la dent</label>
                                        <select v-model="dentalToothStatus">
                                            <option value="healthy">Saine</option>
                                            <option value="cavity">Carie</option>
                                            <option value="filling">Obturation</option>
                                            <option value="crown">Couronne</option>
                                            <option value="missing">Manquante</option>
                                            <option value="implant">Implant</option>
                                            <option value="treatment">En traitement</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Notes</label>
                                        <textarea v-model="dentalToothNotes" placeholder="Notes sur cette dent"></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-else class="no-selection">
                                <h3>üëÜ Cliquez sur une dent</h3>
                                <p>S√©lectionnez une dent dans le diagramme pour voir ses informations.</p>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <h4>Statistiques</h4>
                                <div style="font-size: 0.9em; color: #6b7280;">
                                    <p>Dents saines: {{ dentalStats.healthy }}</p>
                                    <p>Caries: {{ dentalStats.cavity }}</p>
                                    <p>Obturations: {{ dentalStats.filling }}</p>
                                    <p>Couronnes: {{ dentalStats.crown }}</p>
                                    <p>Manquantes: {{ dentalStats.missing }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Onglet Autres -->
                <div v-show="activeTab === 'other'">
                    <h2>Autres Informations</h2>
                    <p>Autres sections du dossier m√©dical...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref } = Vue;
        
        createApp({
            setup() {
                const activeTab = ref('general');
                const patientName = ref('');
                const patientBirthDate = ref('');
                const generalNotes = ref('');
                
                // Donn√©es pour le diagramme dentaire interactif
                const selectedDentalTooth = ref(null);
                const dentalToothStatus = ref('healthy');
                const dentalToothNotes = ref('');
                const dentalHistory = ref([]);
                const dentalData = ref({});
                const dentalStats = ref({
                    healthy: 32, cavity: 0, filling: 0, crown: 0, missing: 0, implant: 0, treatment: 0, unevaluated: 0
                });

                const tabs = [
                    { id: 'general', name: 'üìã G√©n√©ral' },
                    { id: 'dental', name: 'ü¶∑ Dossier Dentaire' },
                    { id: 'other', name: 'üìÑ Autres' }
                ];

                // M√©thodes pour le diagramme dentaire
                const initializeDentalChart = () => {
                    console.log('ü¶∑ Initialisation du diagramme dentaire...');
                    
                    // √âcouter les √©v√©nements de s√©lection de dents
                    document.addEventListener('toothSelected', (event) => {
                        selectedDentalTooth.value = event.detail.toothId;
                        dentalHistory.value.push(event.detail.toothId);
                        
                        // Charger les donn√©es existantes de la dent
                        if (dentalData.value[event.detail.toothId]) {
                            dentalToothStatus.value = dentalData.value[event.detail.toothId].status || 'healthy';
                            dentalToothNotes.value = dentalData.value[event.detail.toothId].notes || '';
                        } else {
                            dentalToothStatus.value = 'healthy';
                            dentalToothNotes.value = '';
                        }
                        
                        console.log('ü¶∑ Dent s√©lectionn√©e:', event.detail.toothId);
                    });
                };
                
                const clearDentalSelection = () => {
                    selectedDentalTooth.value = null;
                    dentalToothStatus.value = 'healthy';
                    dentalToothNotes.value = '';
                    const selectedToothElement = document.querySelector('.tooth.selected');
                    if (selectedToothElement) {
                        selectedToothElement.classList.remove('selected');
                    }
                };
                
                const saveDentalData = () => {
                    if (selectedDentalTooth.value) {
                        dentalData.value[selectedDentalTooth.value] = {
                            status: dentalToothStatus.value,
                            notes: dentalToothNotes.value,
                            timestamp: new Date().toISOString()
                        };
                        
                        updateDentalStats();
                        alert('‚úÖ Donn√©es dentaires sauvegard√©es !');
                    } else {
                        alert('‚ö†Ô∏è Veuillez s√©lectionner une dent d\'abord.');
                    }
                };
                
                const updateDentalStats = () => {
                    // R√©initialiser les stats
                    const stats = {
                        healthy: 0, cavity: 0, filling: 0, crown: 0, missing: 0, implant: 0, treatment: 0, unevaluated: 0
                    };
                    
                    // Compter les dents par statut
                    Object.values(dentalData.value).forEach(tooth => {
                        if (stats.hasOwnProperty(tooth.status)) {
                            stats[tooth.status]++;
                        }
                    });
                    
                    // Les dents non √©valu√©es sont celles qui n'ont pas de donn√©es
                    stats.unevaluated = 32 - Object.keys(dentalData.value).length;
                    
                    dentalStats.value = stats;
                };

                return {
                    activeTab,
                    patientName,
                    patientBirthDate,
                    generalNotes,
                    selectedDentalTooth,
                    dentalToothStatus,
                    dentalToothNotes,
                    dentalHistory,
                    dentalData,
                    dentalStats,
                    tabs,
                    initializeDentalChart,
                    clearDentalSelection,
                    saveDentalData
                };
            }
        }).mount('#app');
    </script>
</body>
</html> 